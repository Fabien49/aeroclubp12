<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />


    <title>Users</title>
  </head>



  <body>
  <div class="container-fluid px-0">
      <div th:replace="Header :: header"></div>
      <div class="container">
        <div class="row">

      <div class="col-12">
          <div class="border-secondary shadow card h-100">
              <div class="card-body">
                  <a class="btn btn-warning" th:href="@{/registration}">Ajouter un utilisateur</a>
                  <div class="table-responsive-sm table-responsive-md table-responsive-lg">
                      <CAPTION> <h1 class="text-center">Liste des utilisateurs</h1></CAPTION>
                      <table th:object="${allUsers}" class="table table-bordered table-striped table">
                          <thead class="bg-info text-white">
                          <tr>
                              <th>Nom</th>
                              <th>Prénom</th>
                              <th>Email</th>
                              <th>Nombres d'heures de vol</th>
                              <th>Rôle</th>
                              <th>Action</th>
                          </tr>
                          </thead>

                          <tr th:each="a:${allUsers}">
                              <td class="align-middle" th:text="${a.lastName}"></td>
                              <td class="align-middle" th:text="${a.firstName}"></td>
                              <td class="align-middle" th:text="${a.email}"></td>
                              <td class="align-middle" th:text="${a.hours}"></td>
                              <td class="align-middle" th:text="${a.roles}"></td>
                              <td th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
                                  <div th:if="${a.id != null}" th:attr="data-id=${a.id}"></div>
                                  <a th:unless="${a.roles == 'ADMIN'}" class="btn btn-success btn-block" th:href="@{/profile/updateRegisteredUser(id=${a.id})}">Éditer</a>
                              </td>
                          </tr>
                  </table>
                  <ul class="nav nav-pills">
                      <li  th:each="page,status:${pages}">
                          <a th:class="${status.index == currentPage?'btn btn-primary' : 'btn'}" th:href="@{topoListe(page=${status.index}, keyword=${keyword}, disponible=${disponible})}" th:text="${status.index + 1}"></a>
                      </li>
                  </ul>
              </div>
          </div>
      </div>
  </div>
  </div>
  </div>


                                <div sec:authorize="isAnonymous()">
                                    <a class="btn btn-info" th:href="@{/connexion}" role="button">Réserver</a>
                                </div>
                            </span>
                </td>
              </tr>
            </table>
          </div>
        </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
